## 了解微服务系统有哪些主要点，

## 按照业务分类：
1. 业务流程服务
2. 组合服务
3. 平台服务
4. 基础服务

## 按照属性分类：
1. 稳定服务和易变服务
2. 核心服务和非核心服务
3. 非功能服务和功能服务
4. 高可用服务和容错服务


## 分解原则：
### 1. 按业务分块先分

### 2.同一个业务内的
1. 调用量大、数据量大
2. 高风险、高频次迭代的
3. 复用程度高的
4. 团队规模过大的
5. 需要专业技能的/门槛高的

### 3.按照依赖原则
1. 跨业务域、跨部门的要改成弱依赖
`其他保证优先级高的不能依赖低的，同级也要拆`
2. 下层业务不能依赖上层
3. 同层服务不能相互依赖
4. 核心服务不能依赖非核心业务
5. 稳定服务不能依赖异变的
6. 功能性服务不依赖非功能性服务
7. 高可用的不依赖容错的

## 服务设计和治理原则
### 1. 设计原则
1. 无状态、幂等性
2. 业务隔离、领域驱动 DDD
3. 契约驱动
4. 资源隔离
5. 故障可隔离

### 2.治理原则
1. 服务有SLA （明确、简洁、可操作性、双方认同）
2. 服务能够自治
3. 可开关，降级、限流、动态调整负载路由
4. 可监控、可统计（有标准、健康报告）
5. 有文档和版本管理
6. 控制权限，有黑白名单，热处理恶意请求
7. 调用链可监控

## gateway的功能和设计
### 1.功能
1. 路由：作为反向代理将客户端请求路由到API，对客户端和API进行解耦
2. 请求整合：当客户端一个操作需要调用多个API时，可以把多个API的返回结果整合成一个返回结果，减少交互次数
3. 隐藏子系统：不用暴露每个子系统给外部，隐藏内部调用逻辑
4. 复用：在一处集中处理安全、权限等问题，不用重复为每个子系统都增加一套。通用功能：负载均衡、认证授权、服务发现、缓存、QOS重试策略/熔断/质量监控、限流、聚合日志/系统跟踪、转译、黑白名单


可以通过增加一层，把这些功能再区分
第一层：安全、认证、分流、监控、日志
第二层：整合查询、超时重试、缓存、熔断