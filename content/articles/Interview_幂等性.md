

### 2.接口幂等性的几种处理方式，在实际项目中是如何处理的

   1. 资源型的，ABA操作不会造成风险的，可以用CAS方式，附加一个期望值，在期望值等于实际值的时候执行操作，否则返回失败
   2. 需要防止ABA操作的，在请求中附加一个版本号，修改成功的记录中也要保存版本号信息，接到请求时先判断版本号，有重复则返回失败。（例如一个商品每个用户只能购买一次，两次库存数量不一样并不能保证这个规则）
   提交之前先获取上个版本号，提交时判断一下，最新的版本号是不是对的上，对不上说明是ABA了

   3. 实践：incident表新增数据的时候，服务器会先生成一个incidentCode(clientID +last incidentID )给前端，客户submit的时候如果重复提交了，会因为唯一索引提交失败


   3. 根据状态判断操作是不是重复了，例如 把满意改为不满意，虽然直接set结果也是一样的，但会让统计数据里的满意减一，不满意加一，产生不一致，所以提交更新的时候要判断一下状态是不是符合逻辑
   4. 主键唯一性，比如新增一个用户，主键是他的ID，这个ID是根据规则生成的每人一个，固定不变，这样重复提交会因为主键冲突而受到异常警告而不会更新数据
   5. 提交的信息生成hashcode 存到 表里，尝试提交的时候获取一下自己的hashcode是不是已经在表里有了 （两次提交的内容是一样的，hashcode也一样）
